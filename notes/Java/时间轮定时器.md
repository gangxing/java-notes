业务场景

比如下单操作后，如果30分钟还未付款，则关闭订单。

方案一、启动一个定时器，轮询所有未支付的订单，计算出超过30分钟就关闭

方案二、每创建一个订单，则启动一个30分钟后执行的定时器，定时器完成有两种方案

1. 订单支付时关闭定时器
2. 定时器执行的时候再次检查订单状态，如果已经支付，则不处理任何逻辑

两种方案点评

从实现上来讲，第一种简单，也是较为常用的方案。存在的不足有以下几点

1. 如果处理的数据量大，每次执行耗时会很长，带来的影响，任务被执行的时间精度得不到保证

第二种方案，解决了第一种方案的时间精度不足问题，每个任务都很”精准“的在预期时刻被执行，但是定时器的数量会随着任务的数量增加而加大，如果任务数量太多，大量的定时任务会消耗大量的资源。

上面两种方案在任务数量较少时，虽然有各自的优缺点，但还是能实现功能。但两种方案都扛不住大数量的任务。基于此，一个叫做”时间轮“的方案（或者叫算法？）被人们发明了出来（伟大的人类啊！！！）

https://www.cnblogs.com/zhongwencool/p/timing_wheel.html

[https://crossoverjie.top/2019/09/27/algorithm/time%20wheel/](https://crossoverjie.top/2019/09/27/algorithm/time wheel/)

